"use strict";(self.webpackChunkteachai=self.webpackChunkteachai||[]).push([[149],{9149:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});var r=a(2791),s=a(1087),n=a(184),l=function(){return(0,n.jsx)("aside",{className:"w-full md:w-60 min-h-[30rem] pt-5",children:(0,n.jsx)("div",{className:"p-2",children:(0,n.jsxs)("ul",{className:"space-y-2 md:space-y-4 grid grid-cols-1",children:[(0,n.jsx)("li",{children:(0,n.jsxs)(s.rU,{to:"/admin/dashboard/users",className:"flex items-center rounded-xl font-bold text-sm text-yellow-900 py-3 px-4",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",className:"text-lg mr-4",viewBox:"0 0 16 16",children:(0,n.jsx)("path",{d:"M4 .5a.5.5 0 0 0-1 0V1H2a2 2 0 0 0-2 2v1h16V3a2 2 0 0 0-2-2h-1V.5a.5.5 0 0 0-1 0V1H4V.5zM16 14V5H0v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2zm-3.5-7h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5z"})}),"Users"]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(s.rU,{to:"/admin/dashboard/post/new",className:"flex rounded-xl font-bold text-sm text-gray-900 py-3 px-4",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",className:"text-lg mr-4",viewBox:"0 0 16 16",children:(0,n.jsx)("path",{d:"M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM5 4h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm-.5 2.5A.5.5 0 0 1 5 6h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zM5 8h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"})}),"Add Post"]})})]})})})},i=a(4165),o=a(5861),c=a(583),d=a(98),u=a(9085),h=a(3872),x=function(){var e=(0,r.useContext)(c.S),t=e.users,a=e.getAllUsers,s=((0,r.useContext)(d._).usage,function(e){var t=new Date(e),a=new Date(t);a.setDate(t.getDate()+30);var r="".concat(a.getDate().toString().padStart(2,"0")," ").concat(["January","February","March","April","May","June","July","August","September","October","November","December"][a.getMonth()]," ").concat(a.getFullYear());return console.log(r),r}),l=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r){var s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.Z.put("/plan/cancel",{userId:t,usageId:r});case 3:s=e.sent,s.data,a(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error: ",e.t0),(0,u.Am)("Error While canceling the Plan");case 12:console.log("User ID: ",t),console.log("Usage ID: ",r);case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}(),x=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r){var s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.Z.delete("/admin/users/".concat(t));case 3:s=e.sent,s.data,(0,u.Am)("User deleted Successfully"),a(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error: ",e.t0),(0,u.Am)("Error While Deleting the Plan");case 13:console.log("User ID: ",t),console.log("Usage ID: ",r);case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}();return(0,n.jsx)("div",{className:"container mx-auto",children:(0,n.jsxs)("table",{className:"min-w-full bg-white border border-gray-300",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"py-2 px-4 border-b",children:"No."}),(0,n.jsx)("th",{className:"py-2 px-4 border-b",children:"First Name"}),(0,n.jsx)("th",{className:"py-2 px-4 border-b",children:"Last Name"}),(0,n.jsx)("th",{className:"py-2 px-4 border-b",children:"Email"}),(0,n.jsx)("th",{className:"py-2 px-4 border-b",children:"Role"}),(0,n.jsx)("th",{className:"py-2 px-4 border-b text-start",children:"Plan"}),(0,n.jsx)("th",{className:"py-2 px-4 border-b",children:"Usage"}),(0,n.jsx)("th",{className:"py-2 px-4 border-b",children:"Expiry Date"}),(0,n.jsx)("th",{className:"py-2 px-4 border-b",children:"Status"}),(0,n.jsx)("th",{className:"py-2 px-4 border-b",children:"Delete"})]})}),(0,n.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((function(e,t){var a,r,i,o;return(0,n.jsxs)("tr",{className:"text-center",children:[(0,n.jsx)("td",{className:"py-2 px-4 border-b",children:t+1}),(0,n.jsx)("td",{className:"py-2 px-4 border-b",children:null===(a=e.user)||void 0===a?void 0:a.firstName}),(0,n.jsx)("td",{className:"py-2 px-4 border-b",children:null===(r=e.user)||void 0===r?void 0:r.lastName}),(0,n.jsx)("td",{className:"py-2 px-4 border-b",children:null===(i=e.user)||void 0===i?void 0:i.email}),(0,n.jsx)("td",{className:"py-2 px-4 border-b",children:null===(o=e.user)||void 0===o?void 0:o.role}),(0,n.jsx)("td",{className:"py-2 px-4 border-b text-start",children:e.plan}),(0,n.jsxs)("td",{className:"py-2 px-4 border-b",children:[e.usageCount,"/",null===e.usageLimit?"Unlimited":null===e||void 0===e?void 0:e.usageLimit]}),(0,n.jsx)("td",{className:"py-2 px-4 border-b",children:null!==e&&void 0!==e&&e.paymentDate?s(null===e||void 0===e?void 0:e.paymentDate):"-"}),(0,n.jsx)("td",{className:"py-2 px-4 border-b",children:["Starter","Professional"].includes(null===e||void 0===e?void 0:e.plan)&&(0,n.jsx)("button",{className:" bg-blue-400 px-2 rounded text-sm text-white",onClick:function(){var t;return l(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t._id,e._id)},children:"Cancel"})}),(0,n.jsx)("td",{className:"py-2 px-4 border-b",children:(0,n.jsx)("button",{className:" bg-blue-400 px-2 rounded text-sm text-white",onClick:function(){var t;return x(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t._id,e._id)},children:"Delete"})})]},e._id)}))})]})})},m=a(7689),p=a(7762),v=a(9439),f=a(6584),g=a(2443),b=a.n(g),j=a(8820),y=a(1243),N=a(6588),Z=function(){var e=(0,r.useState)({headers:{"Content-Type":"multipart/form-data",authorization:"Bearer ".concat(localStorage.getItem("teachai_token"))}}),t=(0,v.Z)(e,2),a=t[0],l=(t[1],(0,r.useRef)(null)),c=(0,r.useRef)(null),d=(0,r.useState)(""),h=(0,v.Z)(d,2),x=h[0],m=h[1],g=(0,r.useState)(""),Z=(0,v.Z)(g,2),w=Z[0],S=Z[1],k=(0,r.useState)(""),C=(0,v.Z)(k,2),D=C[0],U=C[1],I=(0,r.useState)(""),A=(0,v.Z)(I,2),_=A[0],E=(A[1],(0,r.useState)("")),z=(0,v.Z)(E,2),F=z[0],L=z[1],M=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var r,s,n,o,d,h,v,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),(r=new FormData).append("title",w),r.append("image",x),r.append("content",D),e.prev=5,s=(0,p.Z)(r.entries());try{for(s.s();!(n=s.n()).done;)o=n.value,console.log(o[0]+", "+o[1])}catch(i){s.e(i)}finally{s.f()}return e.next=10,y.Z.post("".concat(N.addstory_url,"/story/addstory"),r,a);case 10:d=e.sent,h=d.data,console.log("Data: ",h),(0,u.Am)("Add Post Successful"),S(""),U(""),m(""),c.current.editor.setData(""),l.current.value="",e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),console.log("Here is error!: ",e.t0),L(null===e.t0||void 0===e.t0||null===(v=e.t0.response)||void 0===v||null===(f=v.data)||void 0===f?void 0:f.error);case 21:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(t){return e.apply(this,arguments)}}();return(0,n.jsx)("div",{className:"Inclusive-addStory-page",children:(0,n.jsxs)("form",{onSubmit:M,className:"addStory-form",children:[F&&(0,n.jsx)("div",{className:"error_msg",children:F}),_&&(0,n.jsxs)("div",{className:"success_msg",children:[(0,n.jsx)("span",{children:_}),(0,n.jsx)(s.rU,{to:"/",children:"Go home"})]}),(0,n.jsx)("input",{type:"text",required:!0,id:"title",placeholder:"Title",onChange:function(e){return S(e.target.value)},value:w,className:"mb-3"}),(0,n.jsx)("div",{className:"prose",style:{display:"flex",justifyContent:"center",width:"100%"},children:(0,n.jsx)(f.CKEditor,{editor:b(),config:{toolbar:["heading","|","bold","italic","blockQuote","link","numberedList","bulletedList"]},onChange:function(e,t){var a=t.getData();U(a)},ref:c})}),(0,n.jsxs)("div",{class:"StoryImageField",children:[(0,n.jsx)(j.aBR,{}),(0,n.jsx)("div",{class:"txt",children:x?x.name:" Include a high-quality image in your story to make it more inviting to readers."}),(0,n.jsx)("input",{name:"image",type:"file",ref:l,onChange:function(e){m(e.target.files[0])}})]}),(0,n.jsx)("button",{type:"submit",disabled:!x,className:x?"addStory-btn":"dis-btn",children:"Publish "})]})})},w=a(224),S=function(){var e=(0,r.useState)({headers:{"Content-Type":"multipart/form-data",authorization:"Bearer ".concat(localStorage.getItem("teachai_token"))}}),t=(0,v.Z)(e,2),a=t[0],l=(t[1],(0,m.UO)().slug),c=(0,r.useRef)(null),d=(0,r.useState)(!0),x=(0,v.Z)(d,2),p=x[0],g=x[1],Z=(0,r.useState)({}),S=(0,v.Z)(Z,2),k=(S[0],S[1]),C=(0,r.useState)(""),D=(0,v.Z)(C,2),U=D[0],I=D[1],A=(0,r.useState)(""),_=(0,v.Z)(A,2),E=_[0],z=_[1],F=(0,r.useState)(""),L=(0,v.Z)(F,2),M=L[0],H=L[1],P=(0,r.useState)(""),B=(0,v.Z)(P,2),V=B[0],W=B[1],R=(0,r.useState)(""),T=(0,v.Z)(R,2),O=T[0],q=(T[1],(0,r.useState)("")),J=(0,v.Z)(q,2),G=J[0],K=J[1],Q=(0,m.s0)();(0,r.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,e.next=4,h.Z.get("/story/editStory/".concat(l),a);case 4:t=e.sent,r=t.data,k(r.data),H(r.data.title),W(r.data.content),I(r.data.image),z(r.data.image),g(!1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),Q("/");case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var Y=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(r=new FormData).append("title",M),r.append("content",V),r.append("image",U),r.append("previousImage",E),e.prev=6,e.next=9,y.Z.put("".concat(N.addstory_url,"/story/").concat(l,"/edit"),r,a);case 9:s=e.sent,s.data,(0,u.Am)("Edit Story Successfully"),setTimeout((function(){Q("/blogs")}),2500),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),setTimeout((function(){K("")}),4500),K(e.t0.response.data.error);case 19:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}();return(0,n.jsx)(n.Fragment,{children:p?(0,n.jsx)(w.Z,{}):(0,n.jsx)("div",{className:"Inclusive-editStory-page ",children:(0,n.jsxs)("form",{onSubmit:Y,className:"editStory-form",children:[G&&(0,n.jsx)("div",{className:"error_msg",children:G}),O&&(0,n.jsxs)("div",{className:"success_msg",children:[(0,n.jsx)("span",{children:O}),(0,n.jsx)(s.rU,{to:"/",children:"Go home"})]}),(0,n.jsx)("input",{type:"text",required:!0,id:"title",placeholder:"Title",onChange:function(e){return H(e.target.value)},value:M}),(0,n.jsx)("div",{className:"prose",style:{display:"flex",justifyContent:"center",width:"100%"},children:(0,n.jsx)(f.CKEditor,{editor:b(),config:{toolbar:["heading","|","bold","italic","blockQuote","link","numberedList","bulletedList"]},onChange:function(e,t){var a=t.getData();W(a)},data:V})}),(0,n.jsxs)("div",{class:"currentlyImage",children:[(0,n.jsx)("div",{class:"absolute",children:"Currently Image"}),(0,n.jsx)("img",{src:"".concat(N.backend_resourse,"/storyImages/").concat(E),alt:"storyImage"})]}),(0,n.jsxs)("div",{class:"StoryImageField",children:[(0,n.jsx)(j.aBR,{}),(0,n.jsx)("div",{class:"txt",children:U===E?"    Change the image in your story ":U.name}),(0,n.jsx)("input",{name:"image",type:"file",ref:c,onChange:function(e){I(e.target.files[0])}})]}),(0,n.jsx)("button",{type:"submit",className:"editStory-btn",children:"Edit Story "})]})})})},k=function(){var e=(0,r.useContext)(c.S),t=e.user,a=e.isAuthenticated,s=e.getAllUsers;return(0,r.useEffect)((function(){s()}),[]),(0,n.jsx)(d.j,{children:(0,n.jsx)("div",{className:" max-w-[1440px] mx-auto",children:a&&"admin"===(null===t||void 0===t?void 0:t.role)?(0,n.jsxs)("div",{className:"relative min-h-[80vh] overflow-hidden flex flex-col md:flex-row",children:[(0,n.jsx)(l,{}),(0,n.jsx)("main",{className:" mt-40 md:mt-0 max-h-screen overflow-auto flex-1",children:(0,n.jsx)("div",{className:"px-2 md:px-6 py-8",children:(0,n.jsxs)(m.Z5,{children:[(0,n.jsx)(m.AW,{index:!0,path:"users",element:(0,n.jsx)(x,{})}),(0,n.jsx)(m.AW,{path:"post/new",element:(0,n.jsx)(Z,{})}),(0,n.jsx)(m.AW,{path:"story/:slug/edit",element:(0,n.jsx)(S,{})})]})})})]}):(0,n.jsx)("div",{children:"Loading"})})})}},224:function(e,t,a){a.d(t,{Z:function(){return s}});a(2791);var r=a(184),s=function(){return(0,r.jsx)("div",{className:"mask",children:(0,r.jsx)("div",{className:"loader"})})}},98:function(e,t,a){a.d(t,{_:function(){return d},j:function(){return u}});var r=a(4165),s=a(5861),n=a(9439),l=a(2791),i=a(3872),o=a(9085),c=a(184),d=(0,l.createContext)(),u=function(e){var t=e.children,a=(0,l.useState)(null),u=(0,n.Z)(a,2),h=u[0],x=u[1],m=(0,l.useState)(0),p=(0,n.Z)(m,2),v=p[0],f=p[1],g=(0,l.useState)(0),b=(0,n.Z)(g,2),j=b[0],y=b[1],N=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t,a,s,n,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.get("/getUsage");case 3:t=e.sent,a=t.data,s=a.usage,x(s),console.log("Usage: ",s),n=Math.floor(100*((null===s||void 0===s?void 0:s.usageCount)-1)/(null===s||void 0===s?void 0:s.usageLimit)),l=Math.floor(100*(null===s||void 0===s?void 0:s.noOfFilesUploaded)/(null===s||void 0===s?void 0:s.noOfFilesUploadedLimit)),f(n),y(l),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,o.Am)("Error Usage Data");case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return(0,c.jsx)(d.Provider,{value:{usage:h,creditWidth:v,uploadBarWidth:j,fetchUsage:N},children:t})}}}]);
//# sourceMappingURL=149.96df2f9c.chunk.js.map